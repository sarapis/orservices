/*!
 * remark (http://getbootstrapadmin.com/remark)
 * Copyright 2017 amazingsurge
 * Licensed under the Themeforest Standard Licenses
 */
!function(global,factory){if("function"==typeof define&&define.amd)define("/Component",["exports","jquery","State"],factory);else if("undefined"!=typeof exports)factory(exports,require("jquery"),require("State"));else{var mod={exports:{}};factory(mod.exports,global.jQuery,global.State),global.Component=mod.exports}}(this,function(exports,_jquery,_State){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _jquery2=babelHelpers.interopRequireDefault(_jquery),_State2=babelHelpers.interopRequireDefault(_State);"undefined"==typeof Object.assign&&(Object.assign=_jquery2.default.extend);var _class=function(){function _class(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,_class),this.$el=options.$el?options.$el:(0,_jquery2.default)(document),this.el=this.$el[0],delete options.$el,this.children=this.getDefaultChildren(),this.actions=this.getDefaultActions(),this.initialState=this.getDefaultState(),this._willProcess=_jquery2.default.Callbacks(),this._processed=_jquery2.default.Callbacks(),this.willProcess&&this._willProcess.add(this.willProcess),this.processed&&this._processed.add(this.processed),this.isProcessed=!1,this.mix(options),this.state=null}return babelHelpers.createClass(_class,[{key:"_combineInitialState",value:function(){for(var childrenInitialState={},i=0,l=this.children.length;i<l;i++){var child=this.children[i];Object.assign(childrenInitialState,child.initialState)}return Object.assign(childrenInitialState,this.initialState)}},{key:"_process",value:function(state){this._willProcess.fireWith(this),this.state=state?state:new _State2.default(this.initialState),this._registerActions();for(var i=0,l=this.children.length;i<l;i++)this.children[i]._process(this.state),this.children[i].isProcessed=!0;this._processed.fireWith(this)}},{key:"_registerActions",value:function(){var _this=this,actions=this.actions,_loop=function(state){var action=actions[state];"function"==typeof action?_this.state.on(state,function(){for(var _actions$state,_len=arguments.length,params=Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];(_actions$state=actions[state]).apply.apply(_actions$state,[_this].concat(params))}):"string"==typeof action&&"function"==typeof _this[action]&&_this.state.on(state,function(){for(var _action,_len2=arguments.length,params=Array(_len2),_key2=0;_key2<_len2;_key2++)params[_key2]=arguments[_key2];(_action=_this[action]).apply.apply(_action,[_this].concat(params))})};for(var state in actions)_loop(state)}},{key:"run",value:function(){this.isProcessed||(this._process(),this.isProcessed=!0),this.setState.apply(this,arguments)}},{key:"setState",value:function(){if(this.state){var _state;(_state=this.state).set.apply(_state,arguments)}}},{key:"getState",value:function(){if(this.state){var _state2;return(_state2=this.state).get.apply(_state2,arguments)}return null}},{key:"getDefaultState",value:function(){return{}}},{key:"getDefaultChildren",value:function(){return[]}},{key:"getDefaultActions",value:function(){return{}}},{key:"mix",value:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInit){var _options$children=options.children,children=void 0===_options$children?[]:_options$children,_options$actions=options.actions,actions=void 0===_options$actions?{}:_options$actions,_options$state=options.state,state=void 0===_options$state?{}:_options$state,_options$willProcess=options.willProcess,willProcess=void 0!==_options$willProcess&&_options$willProcess,_options$processed=options.processed,processed=void 0!==_options$processed&&_options$processed;return children=children.filter(function(child){return child instanceof Component}),this.children=[].concat(babelHelpers.toConsumableArray(this.children),babelHelpers.toConsumableArray(children)),this.actions=Object.assign({},this.actions,actions),this.initialState=Object.assign({},this.initialState,state),this.initialState=this._combineInitialState(),"function"!=typeof willProcess&&this._willProcess.add(willProcess),"function"!=typeof processed&&this._processed.add(processed),delete options.children,delete options.actions,delete options.state,delete options.willProcess,delete options.processed,Object.assign(this,options),this}}},{key:"triggerResize",value:function(){if(document.createEvent){var ev=document.createEvent("Event");ev.initEvent("resize",!0,!0),window.dispatchEvent(ev)}else{element=document.documentElement;var event=document.createEventObject();element.fireEvent("onresize",event)}}}]),_class}();exports.default=_class});